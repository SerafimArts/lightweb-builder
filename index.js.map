{"version":3,"sources":["compiler.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _gulp = require(\"gulp\");\n\nvar _gulp2 = _interopRequireDefault(_gulp);\n\nvar _merge = require(\"merge2\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _gulpDebug = require(\"gulp-debug\");\n\nvar _gulpDebug2 = _interopRequireDefault(_gulpDebug);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @class Compiler\r\n * @package lightweb-builder\r\n */\n\nvar Compiler = function () {\n\n    /**\r\n     * @param builder\r\n     */\n\n\n    /**\r\n     * @type {{}}\r\n     * @private\r\n     */\n\n\n    /**\r\n     * @type {WebBuilder}\r\n     * @private\r\n     */\n\n    function Compiler(builder) {\n        _classCallCheck(this, Compiler);\n\n        this._builder = null;\n        this._syncBuilding = false;\n        this._files = {};\n        this._gulpPaths = [];\n\n        this._builder = builder;\n    }\n\n    /**\r\n     * @param enabled\r\n     * @returns {Compiler}\r\n     */\n\n\n    /**\r\n     * @type {Array}\r\n     * @private\r\n     */\n\n\n    /**\r\n     * @type {boolean}\r\n     * @private\r\n     */\n\n\n    _createClass(Compiler, [{\n        key: \"syncBuilding\",\n        value: function syncBuilding() {\n            var enabled = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\n            this._syncBuilding = !!enabled;\n            return this;\n        }\n\n        /**\r\n         * @returns {boolean}\r\n         */\n\n    }, {\n        key: \"file\",\n\n\n        /**\r\n         * @param {string} file\r\n         * @returns {Compiler}\r\n         */\n        value: function file(_file) {\n            this._files[_file] = Compiler.TYPE_FILE;\n            this._gulpPaths.push(_file);\n            return this;\n        }\n\n        /**\r\n         * @param {string} path\r\n         * @param {string} extension\r\n         * @returns {Compiler}\r\n         */\n\n    }, {\n        key: \"path\",\n        value: function path(_path) {\n            var extension = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];\n\n            var lastChar = _path[_path.length - 1];\n            if (lastChar !== '/' && lastChar !== '\\\\') {\n                throw new Error('Directory name must be ended at \"/\" char');\n            }\n\n            this._files[_path] = Compiler.TYPE_DIR;\n            this._gulpPaths.push(_path + '**/*' + extension);\n            return this;\n        }\n\n        /**\r\n         * @param {Function|null} wrapStream\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"createStream\",\n        value: function createStream() {\n            var wrapStream = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n            var stream = _gulp2.default.src(this._gulpPaths);\n\n            if (wrapStream) {\n                stream = wrapStream(stream, this);\n            }\n\n            return stream.pipe((0, _gulpDebug2.default)({ title: '+' }));\n        }\n\n        /**\r\n         * @param gulp\r\n         * @param {object} options\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"minify\",\n        value: function minify(gulp) {\n            var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n            return gulp;\n        }\n\n        /**\r\n         * @param {string} name\r\n         * @param {string} pkg\r\n         * @param {string} version\r\n         * @returns {Error}\r\n         */\n\n    }, {\n        key: \"compilerError\",\n        value: function compilerError(name, pkg, version) {\n            return new Error(name + \" compiler not defined. Please add {\\\"\" + pkg + \"\\\": \\\"\" + version + \"\\\"} in your package.json\");\n        }\n    }, {\n        key: \"synced\",\n        get: function get() {\n            return this._syncBuilding;\n        }\n\n        /**\r\n         * @returns {{}}\r\n         */\n\n    }, {\n        key: \"files\",\n        get: function get() {\n            return this._files;\n        }\n    }]);\n\n    return Compiler;\n}();\n\n/**\r\n * @class JsCompiler\r\n * @package lightweb-builder\r\n */\n\n\nCompiler.TYPE_FILE = 'file';\nCompiler.TYPE_DIR = 'path';\n\nvar JsCompiler = function (_Compiler) {\n    _inherits(JsCompiler, _Compiler);\n\n    function JsCompiler() {\n        var _Object$getPrototypeO;\n\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, JsCompiler);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_Object$getPrototypeO = Object.getPrototypeOf(JsCompiler)).call.apply(_Object$getPrototypeO, [this].concat(args))), _this), _this._package = '', _temp), _possibleConstructorReturn(_this, _ret);\n    }\n    /**\r\n     * @type {{}}\r\n     * @private\r\n     */\n\n\n    _createClass(JsCompiler, [{\n        key: \"namespace\",\n\n\n        /**\r\n         * @param {string} name\r\n         * @returns {JsCompiler}\r\n         */\n        value: function namespace(name) {\n            var lastChar = name[name.length - 1];\n            if (lastChar !== '/') {\n                name += '/';\n            }\n            this._package = name;\n            return this;\n        }\n\n        /**\r\n         * @param {string} text\r\n         * @returns {string}\r\n         * @private\r\n         */\n\n    }, {\n        key: \"minify\",\n\n\n        /**\r\n         * @param gulp\r\n         * @param options\r\n         * @returns {*}\r\n         */\n        value: function minify(gulp) {\n            var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n            return gulp.pipe(this.uglify(options));\n        }\n\n        /**\r\n         * @param {string} path\r\n         * @param {string} extension\r\n         * @returns {Compiler}\r\n         */\n\n    }, {\n        key: \"path\",\n        value: function path(_path2) {\n            var extension = arguments.length <= 1 || arguments[1] === undefined ? '.js' : arguments[1];\n\n            return _get(Object.getPrototypeOf(JsCompiler.prototype), \"path\", this).call(this, _path2, extension);\n        }\n\n        /**\r\n         * @param {Function|null} wrapStream\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"createStream\",\n        value: function createStream() {\n            var _this2 = this;\n\n            var wrapStream = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n            var stream = _get(Object.getPrototypeOf(JsCompiler.prototype), \"createStream\", this).call(this, wrapStream);\n\n            if (this._package !== '') {\n                stream = stream.pipe(this.wrapper({\n                    pathModifier: function pathModifier(path) {\n                        path = path.replace(/\\\\/g, '/');\n\n                        Object.keys(_this2.files).forEach(function (item) {\n                            var type = _this2.files[item];\n                            var isFile = type === Compiler.TYPE_FILE;\n                            var regexp = isFile ? new RegExp('.*?' + _this2.constructor._escapeRegexp(item) + '$', 'g') : new RegExp('.*?' + _this2.constructor._escapeRegexp(item) + '.*?', 'g');\n\n                            if (item.match(regexp)) {\n                                path = path.replace(regexp, isFile ? item.split('/').pop() : '');\n                            }\n                        });\n\n                        return _this2._package + path.replace(/\\.[a-z0-9]+$/, '');\n                    }\n                }));\n            }\n\n            return stream;\n        }\n    }, {\n        key: \"wrapper\",\n\n\n        /**\r\n         * @returns {*}\r\n         */\n        get: function get() {\n            return require('gulp-wrap-commonjs');\n        }\n\n        /**\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"uglify\",\n        get: function get() {\n            return require('gulp-uglify');\n        }\n    }], [{\n        key: \"_escapeRegexp\",\n        value: function _escapeRegexp(text) {\n            return text.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\+\\?\\*\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n        }\n    }]);\n\n    return JsCompiler;\n}(Compiler);\n\n/**\r\n * @class CssCompiler\r\n * @package lightweb-builder\r\n */\n\n\nvar CssCompiler = function (_Compiler2) {\n    _inherits(CssCompiler, _Compiler2);\n\n    function CssCompiler() {\n        var _Object$getPrototypeO2;\n\n        var _temp2, _this3, _ret2;\n\n        _classCallCheck(this, CssCompiler);\n\n        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n        }\n\n        return _ret2 = (_temp2 = (_this3 = _possibleConstructorReturn(this, (_Object$getPrototypeO2 = Object.getPrototypeOf(CssCompiler)).call.apply(_Object$getPrototypeO2, [this].concat(args))), _this3), _this3._autoPrefixer = false, _this3._autoPrefixerOptions = {}, _temp2), _possibleConstructorReturn(_this3, _ret2);\n    }\n    /**\r\n     * @type {boolean}\r\n     * @private\r\n     */\n\n\n    /**\r\n     * @type {{}}\r\n     * @private\r\n     */\n\n\n    _createClass(CssCompiler, [{\n        key: \"path\",\n\n\n        /**\r\n         * @param path\r\n         * @param extension\r\n         * @returns {Compiler}\r\n         */\n        value: function path(_path3) {\n            var extension = arguments.length <= 1 || arguments[1] === undefined ? '.css' : arguments[1];\n\n            return _get(Object.getPrototypeOf(CssCompiler.prototype), \"path\", this).call(this, _path3, extension);\n        }\n\n        /**\r\n         * @param enabled\r\n         * @param options\r\n         * @returns {CssCompiler}\r\n         */\n\n    }, {\n        key: \"autoPrefix\",\n        value: function autoPrefix() {\n            var enabled = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n            var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n            this._autoPrefixer = !!enabled;\n            this._autoPrefixerOptions = options;\n            return this;\n        }\n\n        /**\r\n         * @param gulp\r\n         * @param options\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"minify\",\n        value: function minify(gulp) {\n            var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n            return gulp.pipe(this.uglify(options));\n        }\n\n        /**\r\n         * @param wrapStream\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"createStream\",\n        value: function createStream() {\n            var _this4 = this;\n\n            var wrapStream = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n            var build = function build(stream) {\n                var autoprefixes = require('gulp-autoprefixer');\n\n                if (_this4._autoPrefixer) {\n                    var args = _this4._autoPrefixerOptions;\n                    stream = stream.pipe(autoprefixes(args));\n                }\n\n                return stream;\n            };\n\n            return _get(Object.getPrototypeOf(CssCompiler.prototype), \"createStream\", this).call(this, function (stream) {\n                stream = build(stream);\n                if (wrapStream) {\n                    stream = wrapStream(stream, _this4);\n                }\n                return stream;\n            });\n        }\n    }, {\n        key: \"uglify\",\n\n\n        /**\r\n         * @returns {*}\r\n         */\n        get: function get() {\n            return require('gulp-clean-css');\n        }\n    }]);\n\n    return CssCompiler;\n}(Compiler);\n\n/**\r\n * @class SassCompiler\r\n * @package lightweb-builder\r\n */\n\n\nvar SassCompiler = function (_CssCompiler) {\n    _inherits(SassCompiler, _CssCompiler);\n\n    function SassCompiler() {\n        _classCallCheck(this, SassCompiler);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(SassCompiler).apply(this, arguments));\n    }\n\n    _createClass(SassCompiler, [{\n        key: \"path\",\n\n\n        /**\r\n         * @param path\r\n         * @param extension\r\n         * @returns {*|Compiler}\r\n         */\n        value: function path(_path4) {\n            var extension = arguments.length <= 1 || arguments[1] === undefined ? '.sass' : arguments[1];\n\n            return _get(Object.getPrototypeOf(SassCompiler.prototype), \"path\", this).call(this, _path4, extension);\n        }\n\n        /**\r\n         * @param wrapStream\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"createStream\",\n        value: function createStream() {\n            var _this6 = this;\n\n            var wrapStream = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n            var build = function build(stream) {\n                return stream.pipe(_this6.compiler());\n            };\n\n            return _get(Object.getPrototypeOf(SassCompiler.prototype), \"createStream\", this).call(this, function (stream) {\n                stream = build(stream);\n                if (wrapStream) {\n                    stream = wrapStream(stream, _this6);\n                }\n                return stream;\n            });\n        }\n    }, {\n        key: \"compiler\",\n\n        /**\r\n         * @returns {*}\r\n         */\n        get: function get() {\n            try {\n                return require('gulp-sass');\n            } catch (e) {\n                throw this.compilerError('Sass', 'gulp-sass', '2.2.*');\n            }\n        }\n    }]);\n\n    return SassCompiler;\n}(CssCompiler);\n\n/**\r\n * @class ScssCompiler\r\n * @package lightweb-builder\r\n */\n\n\nvar ScssCompiler = function (_SassCompiler) {\n    _inherits(ScssCompiler, _SassCompiler);\n\n    function ScssCompiler() {\n        _classCallCheck(this, ScssCompiler);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(ScssCompiler).apply(this, arguments));\n    }\n\n    _createClass(ScssCompiler, [{\n        key: \"path\",\n\n\n        /**\r\n         * @param path\r\n         * @param extension\r\n         * @returns {*|Compiler}\r\n         */\n        value: function path(_path5) {\n            var extension = arguments.length <= 1 || arguments[1] === undefined ? '.scss' : arguments[1];\n\n            return _get(Object.getPrototypeOf(ScssCompiler.prototype), \"path\", this).call(this, _path5, extension);\n        }\n    }, {\n        key: \"compiler\",\n\n        /**\r\n         * @returns {*}\r\n         */\n        get: function get() {\n            try {\n                return require('gulp-sass');\n            } catch (e) {\n                throw this.compilerError('Scss', 'gulp-sass', '2.2.*');\n            }\n        }\n    }]);\n\n    return ScssCompiler;\n}(SassCompiler);\n\n/**\r\n * @class LessCompiler\r\n * @package lightweb-builder\r\n */\n\n\nvar LessCompiler = function (_CssCompiler2) {\n    _inherits(LessCompiler, _CssCompiler2);\n\n    function LessCompiler() {\n        _classCallCheck(this, LessCompiler);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(LessCompiler).apply(this, arguments));\n    }\n\n    _createClass(LessCompiler, [{\n        key: \"path\",\n\n\n        /**\r\n         * @param path\r\n         * @param extension\r\n         * @returns {*|Compiler}\r\n         */\n        value: function path(_path6) {\n            var extension = arguments.length <= 1 || arguments[1] === undefined ? '.less' : arguments[1];\n\n            return _get(Object.getPrototypeOf(LessCompiler.prototype), \"path\", this).call(this, _path6, extension);\n        }\n\n        /**\r\n         * @param wrapStream\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"createStream\",\n        value: function createStream() {\n            var _this9 = this;\n\n            var wrapStream = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n            var build = function build(stream) {\n                return stream.pipe(_this9.compiler());\n            };\n\n            return _get(Object.getPrototypeOf(LessCompiler.prototype), \"createStream\", this).call(this, function (stream) {\n                stream = build(stream);\n                if (wrapStream) {\n                    stream = wrapStream(stream, _this9);\n                }\n                return stream;\n            });\n        }\n    }, {\n        key: \"compiler\",\n\n        /**\r\n         * @returns {*}\r\n         */\n        get: function get() {\n            try {\n                return require('gulp-less');\n            } catch (e) {\n                throw this.compilerError('Less', 'gulp-less', '3.0.*');\n            }\n        }\n    }]);\n\n    return LessCompiler;\n}(CssCompiler);\n\n/**\r\n * @class StylusCompiler\r\n * @package lightweb-builder\r\n */\n\n\nvar StylusCompiler = function (_CssCompiler3) {\n    _inherits(StylusCompiler, _CssCompiler3);\n\n    function StylusCompiler() {\n        _classCallCheck(this, StylusCompiler);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(StylusCompiler).apply(this, arguments));\n    }\n\n    _createClass(StylusCompiler, [{\n        key: \"path\",\n\n\n        /**\r\n         * @param {string} path\r\n         * @param {string} extension\r\n         * @returns {*|Compiler}\r\n         */\n        value: function path(_path7) {\n            var extension = arguments.length <= 1 || arguments[1] === undefined ? '.styl' : arguments[1];\n\n            return _get(Object.getPrototypeOf(StylusCompiler.prototype), \"path\", this).call(this, _path7, extension);\n        }\n\n        /**\r\n         * @param wrapStream\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"createStream\",\n        value: function createStream() {\n            var _this11 = this;\n\n            var wrapStream = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n            var build = function build(stream) {\n                return stream.pipe(_this11.compiler());\n            };\n\n            return _get(Object.getPrototypeOf(StylusCompiler.prototype), \"createStream\", this).call(this, function (stream) {\n                stream = build(stream);\n                if (wrapStream) {\n                    stream = wrapStream(stream, _this11);\n                }\n                return stream;\n            });\n        }\n    }, {\n        key: \"compiler\",\n\n        /**\r\n         * @returns {*}\r\n         */\n        get: function get() {\n            try {\n                return require('gulp-stylus');\n            } catch (e) {\n                throw this.compilerError('Stylus', 'gulp-stylus', '2.3.*');\n            }\n        }\n    }]);\n\n    return StylusCompiler;\n}(CssCompiler);\n\n/**\r\n * @class BabelCompiler\r\n * @package lightweb-builder\r\n */\n\n\nvar BabelCompiler = function (_JsCompiler) {\n    _inherits(BabelCompiler, _JsCompiler);\n\n    function BabelCompiler() {\n        var _Object$getPrototypeO3;\n\n        var _temp3, _this12, _ret3;\n\n        _classCallCheck(this, BabelCompiler);\n\n        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n        }\n\n        return _ret3 = (_temp3 = (_this12 = _possibleConstructorReturn(this, (_Object$getPrototypeO3 = Object.getPrototypeOf(BabelCompiler)).call.apply(_Object$getPrototypeO3, [this].concat(args))), _this12), _this12._presets = [], _this12._plugins = [], _this12._options = {}, _temp3), _possibleConstructorReturn(_this12, _ret3);\n    }\n    /**\r\n     * @type {Array}\r\n     * @private\r\n     */\n\n\n    /**\r\n     * @type {Array}\r\n     * @private\r\n     */\n\n\n    /**\r\n     * @type {{}}\r\n     * @private\r\n     */\n\n\n    _createClass(BabelCompiler, [{\n        key: \"preset\",\n\n\n        /**\r\n         * @param presets\r\n         * @returns {BabelCompiler}\r\n         */\n        value: function preset() {\n            for (var _len4 = arguments.length, presets = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n                presets[_key4] = arguments[_key4];\n            }\n\n            this._presets = this._presets.concat(presets);\n            return this;\n        }\n\n        /**\r\n         * @param plugins\r\n         * @returns {BabelCompiler}\r\n         */\n\n    }, {\n        key: \"plugin\",\n        value: function plugin() {\n            for (var _len5 = arguments.length, plugins = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n                plugins[_key5] = arguments[_key5];\n            }\n\n            this._plugins = this._plugins.concat(plugins);\n            return this;\n        }\n    }, {\n        key: \"options\",\n        value: function options() {\n            var args = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n            this._options = args;\n            return this;\n        }\n\n        /**\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"createStream\",\n\n\n        /**\r\n         * @param wrapStream\r\n         * @returns {*}\r\n         */\n        value: function createStream() {\n            var _this13 = this;\n\n            var wrapStream = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n            var build = function build(stream) {\n                var args = {\n                    presets: _this13._presets,\n                    plugins: _this13._plugins\n                };\n\n                Object.keys(_this13._options).forEach(function (key) {\n                    args[key] = _this13._options[key];\n                });\n\n                return stream.pipe(_this13.compiler(args));\n            };\n\n            return _get(Object.getPrototypeOf(BabelCompiler.prototype), \"createStream\", this).call(this, function (stream) {\n                stream = build(stream);\n                if (wrapStream) {\n                    stream = wrapStream(stream, _this13);\n                }\n                return stream;\n            });\n        }\n    }, {\n        key: \"compiler\",\n        get: function get() {\n            try {\n                return require('gulp-babel');\n            } catch (e) {\n                throw this.compilerError('Babel', 'gulp-babel', '6.1.*');\n            }\n        }\n    }]);\n\n    return BabelCompiler;\n}(JsCompiler);\n\n/**\r\n * @class CoffeeCompiler\r\n * @package lightweb-builder\r\n */\n\n\nvar CoffeeCompiler = function (_JsCompiler2) {\n    _inherits(CoffeeCompiler, _JsCompiler2);\n\n    function CoffeeCompiler() {\n        var _Object$getPrototypeO4;\n\n        var _temp4, _this14, _ret4;\n\n        _classCallCheck(this, CoffeeCompiler);\n\n        for (var _len6 = arguments.length, args = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n            args[_key6] = arguments[_key6];\n        }\n\n        return _ret4 = (_temp4 = (_this14 = _possibleConstructorReturn(this, (_Object$getPrototypeO4 = Object.getPrototypeOf(CoffeeCompiler)).call.apply(_Object$getPrototypeO4, [this].concat(args))), _this14), _this14._bare = false, _temp4), _possibleConstructorReturn(_this14, _ret4);\n    }\n    /**\r\n     * @type {boolean}\r\n     * @private\r\n     */\n\n\n    _createClass(CoffeeCompiler, [{\n        key: \"bare\",\n\n\n        /**\r\n         * @param enabled\r\n         * @returns {CoffeeCompiler}\r\n         */\n        value: function bare() {\n            var enabled = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n            this._bare = enabled;\n            return this;\n        }\n\n        /**\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"path\",\n\n\n        /**\r\n         * @param {string} path\r\n         * @param {string} extension\r\n         * @returns {Compiler}\r\n         */\n        value: function path(_path8) {\n            var extension = arguments.length <= 1 || arguments[1] === undefined ? '.coffee' : arguments[1];\n\n            return _get(Object.getPrototypeOf(CoffeeCompiler.prototype), \"path\", this).call(this, _path8, extension);\n        }\n\n        /**\r\n         * @param wrapStream\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"createStream\",\n        value: function createStream() {\n            var _this15 = this;\n\n            var wrapStream = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n            var build = function build(stream) {\n                var args = {};\n\n                if (_this15._bare) {\n                    args['bare'] = true;\n                }\n\n                return stream.pipe(_this15.compiler(args));\n            };\n\n            return _get(Object.getPrototypeOf(CoffeeCompiler.prototype), \"createStream\", this).call(this, function (stream) {\n                stream = build(stream);\n                if (wrapStream) {\n                    stream = wrapStream(stream, _this15);\n                }\n                return stream;\n            });\n        }\n    }, {\n        key: \"compiler\",\n        get: function get() {\n            try {\n                return require('gulp-coffee');\n            } catch (e) {\n                throw this.compilerError('CoffeeScript', 'gulp-coffee', '2.3.*');\n            }\n        }\n    }]);\n\n    return CoffeeCompiler;\n}(JsCompiler);\n\n/**\r\n * @class TypeScriptCompiler\r\n * @package lightweb-builder\r\n */\n\n\nvar TypeScriptCompiler = function (_JsCompiler3) {\n    _inherits(TypeScriptCompiler, _JsCompiler3);\n\n    function TypeScriptCompiler() {\n        _classCallCheck(this, TypeScriptCompiler);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(TypeScriptCompiler).apply(this, arguments));\n    }\n\n    _createClass(TypeScriptCompiler, [{\n        key: \"path\",\n\n\n        /**\r\n         * @param {string} path\r\n         * @param {string} extension\r\n         * @returns {Compiler}\r\n         */\n        value: function path(_path9) {\n            var extension = arguments.length <= 1 || arguments[1] === undefined ? '.ts' : arguments[1];\n\n            return _get(Object.getPrototypeOf(TypeScriptCompiler.prototype), \"path\", this).call(this, _path9, extension);\n        }\n\n        /**\r\n         * @param wrapStream\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"createStream\",\n        value: function createStream() {\n            var _this17 = this;\n\n            var wrapStream = arguments.length <= 0 || arguments[0] === undefined ? null : arguments[0];\n\n            var build = function build(stream) {\n                var args = {};\n\n                return stream.pipe(_this17.compiler(args));\n            };\n\n            return _get(Object.getPrototypeOf(TypeScriptCompiler.prototype), \"createStream\", this).call(this, function (stream) {\n                stream = build(stream);\n                if (wrapStream) {\n                    stream = wrapStream(stream, _this17);\n                }\n                return stream;\n            });\n        }\n    }, {\n        key: \"compiler\",\n\n        /**\r\n         * @returns {*}\r\n         */\n        get: function get() {\n            try {\n                return require('gulp-typescript');\n            } catch (e) {\n                throw this.compilerError('TypeScriptCompiler', 'gulp-typescript', '2.12.*');\n            }\n        }\n    }]);\n\n    return TypeScriptCompiler;\n}(JsCompiler);\n\n/**\r\n * @class WebBuilder\r\n * @package lightweb-builder\r\n */\n\n\nvar WebBuilder = function () {\n    function WebBuilder() {\n        _classCallCheck(this, WebBuilder);\n\n        this._compilers = [];\n        this._sourceMaps = false;\n        this._minify = false;\n        this._minifyOptions = {};\n        this._compress = false;\n        this._syncBuildingNext = false;\n    }\n    /**\r\n     * @type {Array}\r\n     * @private\r\n     */\n\n\n    /**\r\n     * @type {boolean}\r\n     * @private\r\n     */\n\n\n    /**\r\n     * @type {boolean}\r\n     * @private\r\n     */\n\n\n    /**\r\n     * @type {{}}\r\n     * @private\r\n     */\n\n\n    /**\r\n     * @type {boolean}\r\n     * @private\r\n     */\n\n\n    /**\r\n     * @type {boolean}\r\n     * @private\r\n     */\n\n\n    _createClass(WebBuilder, [{\n        key: \"babel\",\n\n\n        /**\r\n         * @param {Function} callback\r\n         * @returns {WebBuilder}\r\n         */\n        value: function babel() {\n            var callback = arguments.length <= 0 || arguments[0] === undefined ? function () {} : arguments[0];\n\n            return this._make(BabelCompiler, callback);\n        }\n\n        /**\r\n         * @param {Function} callback\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"es6\",\n        value: function es6() {\n            var callback = arguments.length <= 0 || arguments[0] === undefined ? function () {} : arguments[0];\n\n            return this._make(BabelCompiler, callback, function (compiler) {\n                return compiler.preset('es2015');\n            });\n        }\n\n        /**\r\n         * @param {Function} callback\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"es7\",\n        value: function es7() {\n            var callback = arguments.length <= 0 || arguments[0] === undefined ? function () {} : arguments[0];\n\n            return this._make(BabelCompiler, callback, function (compiler) {\n                return compiler.preset('es2015', 'stage-0');\n            });\n        }\n\n        /**\r\n         * @param {Function} callback\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"coffee\",\n        value: function coffee() {\n            var callback = arguments.length <= 0 || arguments[0] === undefined ? function () {} : arguments[0];\n\n            return this._make(CoffeeCompiler, callback);\n        }\n\n        /**\r\n         * @param {Function} callback\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"js\",\n        value: function js() {\n            var callback = arguments.length <= 0 || arguments[0] === undefined ? function () {} : arguments[0];\n\n            return this._make(JsCompiler, callback);\n        }\n\n        /**\r\n         * @param {Function} callback\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"ts\",\n        value: function ts() {\n            var callback = arguments.length <= 0 || arguments[0] === undefined ? function () {} : arguments[0];\n\n            return this._make(TypeScriptCompiler, callback);\n        }\n\n        /**\r\n         * @param {Function} callback\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"sass\",\n        value: function sass() {\n            var callback = arguments.length <= 0 || arguments[0] === undefined ? function () {} : arguments[0];\n\n            return this._make(SassCompiler, callback);\n        }\n\n        /**\r\n         * @param {Function} callback\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"scss\",\n        value: function scss() {\n            var callback = arguments.length <= 0 || arguments[0] === undefined ? function () {} : arguments[0];\n\n            return this._make(ScssCompiler, callback);\n        }\n\n        /**\r\n         * @param {Function} callback\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"less\",\n        value: function less() {\n            var callback = arguments.length <= 0 || arguments[0] === undefined ? function () {} : arguments[0];\n\n            return this._make(LessCompiler, callback);\n        }\n\n        /**\r\n         * @param {Function} callback\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"stylus\",\n        value: function stylus() {\n            var callback = arguments.length <= 0 || arguments[0] === undefined ? function () {} : arguments[0];\n\n            return this._make(StylusCompiler, callback);\n        }\n\n        /**\r\n         * @param {Function} callback\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"css\",\n        value: function css() {\n            var callback = arguments.length <= 0 || arguments[0] === undefined ? function () {} : arguments[0];\n\n            return this._make(CssCompiler, callback);\n        }\n\n        /**\r\n         * @param {Function} compilerClass\r\n         * @param {Function|string|Array} callback\r\n         * @param {Function|null} before\r\n         * @returns {WebBuilder}\r\n         * @private\r\n         */\n\n    }, {\n        key: \"_make\",\n        value: function _make(compilerClass) {\n            var callback = arguments.length <= 1 || arguments[1] === undefined ? function () {} : arguments[1];\n            var before = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\n            var compiler = new compilerClass(this);\n\n            if (this._syncBuildingNext) {\n                compiler.syncBuilding(true);\n                this._syncBuildingNext = false;\n            }\n\n            if (typeof callback === 'string') {\n                (function () {\n                    var file = callback;\n                    callback = function callback(compiler) {\n                        return compiler.file(file);\n                    };\n                })();\n            } else if (callback instanceof Array) {\n                (function () {\n                    var files = callback;\n                    callback = function callback(compiler) {\n                        for (var i = 0; i < files.length; i++) {\n                            compiler.file(files[i]);\n                        }\n                    };\n                })();\n            }\n\n            if (before) {\n                compiler = before(compiler);\n            }\n\n            this._compilers.push(compiler);\n\n            callback(compiler);\n\n            return this;\n        }\n\n        /**\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"withCommonJs\",\n        value: function withCommonJs() {\n            return this.then.js(function (compiler) {\n                compiler.file(require.resolve('commonjs-require/commonjs-require'));\n            });\n        }\n\n        /**\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"withPolyfill\",\n        value: function withPolyfill() {\n            return this.then.js(function (compiler) {\n                compiler.file(require.resolve('babel-polyfill/dist/polyfill'));\n            });\n        }\n\n        /**\r\n         * @param {boolean} enabled\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"withSourceMaps\",\n        value: function withSourceMaps() {\n            var enabled = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n            this._sourceMaps = !!enabled;\n            return this;\n        }\n\n        /**\r\n         * @param {boolean} enabled\r\n         * @param {object} options\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"withMinify\",\n        value: function withMinify() {\n            var enabled = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n            var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n            this._minify = !!enabled;\n            this._minifyOptions = options;\n            return this;\n        }\n\n        /**\r\n         * @param {boolean} enabled\r\n         * @returns {WebBuilder}\r\n         */\n\n    }, {\n        key: \"withGzip\",\n        value: function withGzip() {\n            var enabled = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n            this._compress = !!enabled;\n            return this;\n        }\n\n        /**\r\n         * @param output\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"build\",\n        value: function build() {\n            var output = arguments.length <= 0 || arguments[0] === undefined ? './compiled' : arguments[0];\n\n            if (this._compilers.length === 0) {\n                throw new Error('Building error. Empty sources list');\n            }\n\n            var sourcemaps = require('gulp-sourcemaps');\n            var concat = require('gulp-concat');\n            var gzip = require('gulp-gzip');\n\n            var streams = [];\n            var asyncStreams = [];\n\n            for (var i = 0; i < this._compilers.length; i++) {\n                var compiler = this._compilers[i];\n                var compilerStream = compiler.createStream();\n\n                if (compiler.synced) {\n                    streams.push(compilerStream);\n                } else {\n                    asyncStreams.push(compilerStream);\n                }\n            }\n\n            var stream = _merge2.default.apply(undefined, streams.concat([asyncStreams]));\n\n            if (this._sourceMaps) {\n                stream = stream.pipe(sourcemaps.init());\n            }\n\n            var parts = output.toString().split('/');\n            var fileName = parts.pop();\n            var dist = (parts.length > 0 ? parts.join('/') : '.') + '/';\n            if (!fileName.trim()) {\n                throw new Error('Invalid output path ' + output);\n            }\n\n            stream = stream.pipe(concat(fileName));\n\n            if (this._minify) {\n                stream = this._compilers[0].minify(stream, this._minifyOptions);\n            }\n\n            if (this._sourceMaps) {\n                stream = stream.pipe(sourcemaps.write('.'));\n            }\n\n            if (this._compress) {\n                stream.pipe(concat(fileName)).pipe(gzip()).pipe(_gulp2.default.dest(dist));\n            }\n\n            return stream.pipe(_gulp2.default.dest(dist));\n        }\n    }, {\n        key: \"then\",\n\n\n        /**\r\n         * @returns {WebBuilder}\r\n         */\n        get: function get() {\n            this._syncBuildingNext = true;\n\n            if (this._compilers.length > 0) {\n                var lastCompiler = this._compilers[this._compilers.length - 1];\n                lastCompiler.syncBuilding(true);\n            }\n\n            return this;\n        }\n    }]);\n\n    return WebBuilder;\n}();\n\nexports.default = WebBuilder;"],"sourceRoot":"/source/"}